@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== GLOBAL: matikan scroll halaman ===== */
@layer base {
  html, body {
    height: 100%;
    margin: 0;
    background: #F1F2F4;
    overflow: hidden; /* halaman utama tidak scroll */
    padding: env(safe-area-inset-top) env(safe-area-inset-right)
             env(safe-area-inset-bottom) env(safe-area-inset-left);
  }
}

/* ===== COMPONENTS ===== */
@layer components {

  /* FRAME penuh layar: sidebar + konten */
  .admin-frame{
    position: fixed;
    inset: 0;
    height: calc(var(--vh, 1vh) * 100); /* fallback iOS lama */
    display: flex;
    overflow: hidden; /* frame tidak memicu scroll */
    z-index: 0;
  }
  @supports (height: 100dvh) {
    .admin-frame{ height: 100dvh; }    /* device modern */
  }

  /* ----- Sidebar (expanded) ----- */
  .side{
    position: relative;
    flex: 0 0 300px; /* lebar tetap */
    width: 300px;
    height: 100%;
    padding: 22px 18px;
    color:#fff;
    background: radial-gradient(120% 120% at 20% 10%, #252525 0%, #252525 100%);
    border-top-right-radius: 80px;
    border-bottom-right-radius: 80px;
    box-shadow:
      inset 0 1px 0 rgba(202,38,38,.08),
      inset 0 -3px 10px rgba(0,0,0,.55),
      28px 0 60px rgba(0,0,0,.45),
      0 12px 40px rgba(0,0,0,.35);
    overflow: visible;
    z-index: 1;
    transition: flex-basis .25s ease, width .25s ease, padding .2s ease;
  }
  .side::after{
    content:"";
    position:absolute; top:12px; bottom:12px; right:-26px; width:42px;
    border-radius:9999px;
    background: radial-gradient(closest-side, rgba(255,255,255,.35), rgba(255,255,255,0));
    filter: blur(14px);
    opacity:.9; pointer-events:none;
  }

  /* ----- Sidebar (collapsed) ----- */
  .side--mini{
    flex: 0 0 72px;
    width: 72px;
    padding-left: 12px;
    padding-right: 12px;
  }
  .side--mini .side-title,
  .side--mini .side-item span{ display:none; }     /* sembunyikan teks */
  .side--mini .side-item{
    justify-content: center;
    padding-left: .5rem; padding-right: .5rem;
  }
  .side--mini .side-item .ico{ margin-right: 0; }
  .side--mini::after{ right: -18px; width: 32px; } /* glow rapat ke sisi */

  /* Header & tombol hamburger */
  .side-head{ @apply flex items-center gap-3 font-semibold px-3 py-2; color:rgba(255,255,255,.9); }
  .side-title{ white-space: nowrap; }
  .side-toggle{
    appearance: none; border: 0; background: transparent;
    display: inline-flex; align-items: center; justify-content: center;
    width: 36px; height: 36px; border-radius: 10px; margin-right: 8px;
    color: rgba(255,255,255,.95); cursor: pointer;
  }
  .side-toggle:hover{ background: rgba(255,255,255,.08); }
  .side-toggle:focus-visible{ outline: 2px solid #ffffff80; outline-offset: 2px; }
  .side-toggle .ico{ width:22px; height:22px; }

  /* Daftar menu */
  .side-nav{ @apply mt-4 space-y-3; }
  .side .ico{ width:22px; height:22px; color:rgba(255,255,255,.95); }
  .side-item{
    @apply flex items-center gap-3 rounded-xl px-4 py-3 text-[17px] font-semibold;
    color: rgba(255,255,255,.85);
    transition: background .15s ease, box-shadow .15s ease, color .15s ease;
    min-height: 44px;
  }
  .side-item:hover{ background: rgba(255,255,255,.06); }
  .side-item--active{
    color:#fff;
    background: rgba(255,255,255,.12);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.25), inset 0 -2px 6px rgba(0,0,0,.45);
  }
  .side-item--active .ico{ color:#3B82F6; }

  /* ----- CONTENT: grid 3 baris (judul / board / KPI) ----- */
  .content{
    flex: 1 1 auto;
    min-width: 0;
    height: 100%;
    display: grid;
    grid-template-rows: auto 1fr auto; /* title / scroll area / kpi */
    gap: 24px;
    padding: 24px 28px;
    overflow: hidden; /* yang scroll hanya .board di tengah */
  }

  /* area tengah yang boleh scroll internal */
  .board{ min-height: 0; overflow: auto; overscroll-behavior: contain; scrollbar-gutter: stable; }
  .board::-webkit-scrollbar{ width: 10px; }
  .board::-webkit-scrollbar-thumb{ background: rgba(0,0,0,.22); border-radius: 8px; }
  .board::-webkit-scrollbar-track{ background: transparent; }

  /* helper untuk anak grid/flex yang harus bisa menyusut */
  .col-stretch{ min-height: 0; overflow: hidden; }
  .card-scroll{ height: 100%; overflow: auto; }

  /* Komponen UI */
  .page-pill{
    @apply text-3xl font-extrabold text-center mx-10;
    width:320px; padding:8px 16px; color:#fff;
    background:#252525; border-radius:9999px;
    box-shadow: inset 0 10px 14px rgba(255,255,255,.14),
                inset 0 -10px 18px rgba(0,0,0,.35),
                0 12px 20px rgba(0,0,0,.18);
  }
  .neo-card{
    background:#D9D9D9; border-radius:18px; padding:18px;
    box-shadow: inset 0 2px 0 rgba(255,255,255,.65),
                inset 0 -6px 10px rgba(0,0,0,.12),
                0 12px 20px rgba(0,0,0,.12);
  }
  .card-title{ @apply text-xl font-bold text-center; }
  .divider{ height:1px; background:rgba(0,0,0,.18); margin:10px 6px 14px; }
  .table-wrap{ @apply overflow-x-auto; }
  .neo-table{ @apply w-full text-sm; border-collapse:collapse; }
  .neo-table thead th{ @apply font-semibold text-left py-2; }
  .neo-table tbody td{ @apply py-2; }
  .neo-table tbody tr + tr td{ border-top:1px dashed rgba(0,0,0,.1); }
  .list-y{ @apply divide-y divide-black/10; }
  .list-row{ @apply flex items-center justify-between py-3 text-sm; }
  .chip-group{ @apply flex items-center gap-2; }
  .chip{
    @apply text-xs px-3 py-1 rounded-full;
    background:#E7E7E7;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.55), inset 0 -2px 6px rgba(0,0,0,.12);
  }
  .kpi-tile{
    background:#262626; color:#fff; border-radius:18px; padding:18px; text-align:center;
    box-shadow: inset 0 8px 12px rgba(255,255,255,.08),
                inset 0 -10px 18px rgba(0,0,0,.45),
                0 14px 26px rgba(0,0,0,.32);
  }
  .kpi-value{ @apply text-3xl font-extrabold leading-tight; }
  .kpi-label{ @apply text-sm opacity-90 mt-1; }

  /* Mobile: kembali ke flow normal */
  @media (max-width:1024px){
    html, body { overflow:auto; }
    .admin-frame{ position: static; display:block; height:auto; }
    .content{ grid-template-rows: auto auto auto; height:auto; overflow:visible; padding:16px; }
    .side{
      width:auto; height:auto; border-radius:24px;
      box-shadow: 0 22px 40px rgba(0,0,0,.35);
    }
    .side::after{ display:none; }
  }
}
